services:

  simulator-b:
    build: ./eeg_acquisition
    environment:
      ACQ_PORT: ${ACQ_PORT_B}
      PACKET_INTERVAL: ${PACKET_INTERVAL_B}
    command: python simulator.py
    ports:
      - "13854:13854"
      
  acquisition-b:
    build: ./eeg_acquisition
    extra_hosts:
      - "host.docker.internal:host-gateway"
    environment:
      PLAYER_ID: ${PLAYER_ID_B}
      EEG_HOST: ${EEG_HOST_B}
      ACQ_PORT: ${ACQ_PORT_B}
      BROKER_URL: ${BROKER_URL}
      POOR_SIGNAL_LEVEL_THRESHOLD: ${POOR_SIGNAL_LEVEL_THRESHOLD}
    command: python acquisition_service.py
    depends_on: 
      - simulator-b